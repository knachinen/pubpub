---
title: 주소 추출 - 002 - 데이터 재구성
tags:
  - darkmap
  - python
  - pandas
  - civic-hack
---

### 다음 단계 

기사 본문을 웹스크래핑한 뒤,  
내용에서 RAG 로 주소를 추출했다. 

오픈소스 LLM 'gemma:2b' 으로,  
가장 간단한 RAG 시스템으로 나온 결과는 좀 오락가락했다.  

성능을 끌어올리는 일은 일단 미뤄두고,  
결과가 잘 나왔다고 생각했을 때,  
정확한 주소로 만들어야 geopy 라이브러리를 쓸 수 있다.  

### 공공 데이터

공공데이터포털 등 공식적으로 공유된 데이터를 찾기가 어려웠다.  
다행히 한 블로그에서 데이터를 찾을 수 있었다.  
- [최신자료] 2024/2/1 고시 전국 법정동/행정동 현황 (XLS) : 네이버 블로그 (naver.com) | [Link](https://m.blog.naver.com/s9soft/221658209696) 

데이터는 법정동코드, 시도명, 시군구명, 읍면동명, 동리명, 생성일자, 말소일자 컬럼으로 이루어져있다.

![[Pasted image 20240514151607.png]]

> 원래... 이렇게 구성되어 있었구나. 
> 결과적으로 원래 구성으로 돌아왔네.

### 데이터 재구성

이걸 처음 생각으로는 디렉토리형으로 만들면 좋겠다는 생각이 들었다.  
서울특별시 안에 종로구가 있고, 종로구 안에 청운동이 있게 만든다.  

파이썬 딕셔너리와 리스트로 다음과 같은 형태가 되었다.  

```python
{
  'list': ['서울특별시', ... ],
  '서울특별시': {
    'list': ['종로구' ... ], 
    '종로구': {
     'list': ['청운동' ... ], 
     '청운동': {}, 
     ... }
    ... }
  ... }
```

그런데 주소를 추출하는 과정이 좀 번거롭고,  
직관적이지 않아서 할 때마다 구조를 들여다 봐야만 했다.  

판다스 데이터프레임으로 2차원 구조로 다시 만들었는데,  
글로 정리한다고 보니, 원래 데이터 구성으로 돌아온 것이었구나...  


